(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i);n(81),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(69),o=n(15),l=n(16),u=0,m=function(e){var t=e.onClick,n=e.completed,a=e.text;return r.a.createElement("li",{onClick:t,style:{textDecoration:n?"line-through":"none"}},a)},d=function(e){var t=e.todos;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(m,Object.assign({key:e.id},e))}))},h=function(e,t){switch(t){case"SHOW_COMPLETED":return e.filter(function(e){return e.completed});case"SHOW_ACTIVE":return e.filter(function(e){return!e.completed});case"SHOW_ALL":default:return e}},p=d=Object(l.b)(function(e){return{todos:h(e.todos,e.visibilityFilter)}})(d),f=n(44),v=(n(86),function(e){var t,n=e.dispatch;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var a;(e.preventDefault(),t.value.trim())&&(n((a=t.value,{type:"ADD_TODO",id:u++,text:a})),t.value="")}},r.a.createElement(f.a,{type:"primary"},"Example button"),r.a.createElement("input",{ref:function(e){t=e}}),r.a.createElement("button",{type:"submit"},"Add Todo")),r.a.createElement(p,null))}),g=v=Object(l.b)()(v),E=n(22),b=n(13),w=n.n(b),y=n(24),O=n(62),k=n(63),C=n(72),x=n(65),j=n(73),S=n(164),L=n(165),N=n(162),T=n(160),D=n(163),I=n(161),W=(n(120),n(25)),_=n.n(W),P=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(C.a)(this,Object(x.a)(t).call(this,e))).state={isRunning:!1,ws:"",maxClient:0,space:0,buttonLoading:!1,connectedNum:0},n.getConf(),n.listenWs(),n.getInfo(),n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"getInfo",value:function(){var e=Object(y.a)(w.a.mark(function e(){var t,n=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.httpPost({url:"/api/getInfo"});case 2:t=e.sent,this.setState(function(){return t}),setTimeout(function(){n.getInfo()},600);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listenWs",value:function(){var e=this,t=new WebSocket("ws://"+window.location.host+"/ws");t.onopen=function(){console.log("Test_ws connection success.")},t.onmessage=function(t){var n=JSON.parse(t.data);switch(n.type){case"updateConf":e.setState(function(){return Object(E.a)({},n.data,{buttonLoading:!1})});break;case"updateSwitchFire":e.setState(function(){return Object(E.a)({},n.data)})}},t.onclose=function(e){console.log("Test_ws connection closed.")}}},{key:"getConf",value:function(){var e=Object(y.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.httpPost({url:"/api/getConf"});case 2:t=e.sent,this.setState({ws:t.ws,maxClient:t.maxClient,space:t.space,isRunning:t.isRunning});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"launch",value:function(){var e=Object(y.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({buttonLoading:!0}),e.next=3,_.a.httpPost({url:"/api/runTest",json:{}});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"shutdown",value:function(){var e=Object(y.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({buttonLoading:!0}),e.next=3,_.a.httpPost({url:"/api/stopTest"});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeInput",value:function(e,t){if(e&&e.target&&e.target.value){var n=e.target.value,a={};a[t]=n,this.setState(function(){return a})}}},{key:"getPercent",value:function(e){return(100*e/(this.state.maxClient*(this.state.clientList?this.state.clientList.length:1))).toFixed(2)}},{key:"render",value:function(){var e=this,t=[];this.state.clientList&&this.state.clientList.forEach(function(e){t.push(r.a.createElement("div",{key:e.mac},r.a.createElement("p",null,"mac\uff1a",e.mac," - ip\uff1a",e.ipList.join(",")),r.a.createElement("hr",null)))});var n=[],a=[];if(this.state.clientStatis){if(this.state.clientStatis.req)for(var i in this.state.clientStatis.req)n.push(r.a.createElement("div",null,r.a.createElement("span",{className:"type-name"},i)," :"," ",this.state.clientStatis.req[i]));if(this.state.clientStatis.req)for(var c in this.state.clientStatis.res)a.push(r.a.createElement("div",null,r.a.createElement("span",{className:"type-name"},c)," :"," ",this.state.clientStatis.res[c]))}return r.a.createElement("div",{className:"dash-page"},r.a.createElement("h2",null,"websocket\u8fde\u63a5\u6570\u6d4b\u8bd5"),r.a.createElement(S.a,{gutter:16,align:"middle"},r.a.createElement(L.a,{className:"gutter-row",span:9},r.a.createElement(N.a,{addonBefore:"\u8fde\u63a5\u5730\u5740",value:this.state.ws,onChange:function(t){return e.handleChangeInput(t,"ws")},disabled:!0})),r.a.createElement(L.a,{className:"gutter-row",span:5},r.a.createElement(N.a,{addonBefore:"\u5355\u673a\u8fde\u63a5\u6570\u91cf",value:this.state.maxClient,placeholder:"500",disabled:!0,onChange:function(t){return e.handleChangeInput(t,"maxClient")}})),r.a.createElement(L.a,{className:"gutter-row",span:6},r.a.createElement(N.a,{addonBefore:"\u95f4\u9694\u65f6\u95f4(ms)",value:this.state.space,placeholder:"0",disabled:!0,onChange:function(t){return e.handleChangeInput(t,"space")}})),r.a.createElement(L.a,{className:"gutter-row",span:4},this.state.isRunning?r.a.createElement(f.a,{type:"primary",loading:this.state.buttonLoading,onClick:function(){return e.shutdown()},danger:!0,block:!0},"\u505c\u6b62"):r.a.createElement(f.a,{loading:this.state.buttonLoading,type:"primary",onClick:function(){return e.launch()},block:!0},"\u542f\u52a8"))),r.a.createElement(T.a,null),r.a.createElement("div",null,r.a.createElement("span",null,"\u5ba2\u6237\u7aef\u603b\u8fde\u63a5\u6570 \uff1a",this.state.clientList?Number(this.state.clientList.length)*Number(this.state.maxClient):0)),r.a.createElement(T.a,null),r.a.createElement("div",{className:"dash-body"},r.a.createElement(S.a,{gutter:[16,16],justify:"space-around",align:"middle"},r.a.createElement(L.a,{span:10},r.a.createElement("div",null,r.a.createElement(D.a,{title:"Connecting",value:this.state.connectedNum}),r.a.createElement(I.a,{strokeColor:{"0%":"#87d068","100%":"#87d068"},trailColor:"#096dd9",type:"circle",percent:this.getPercent(this.state.connectedNum),width:80}))))),r.a.createElement(T.a,null),r.a.createElement("div",{className:"dash-log"},"\u5ba2\u6237\u7aef\u6570\u91cf \uff1a",this.state.clientList?this.state.clientList.length:0,t))}}]),t}(a.Component),A=n(21),B=n(71),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return console.log(e),[].concat(Object(B.a)(e),[{id:t.id,text:t.text,completed:!1}]);case"TOGGLE_TODO":return e.map(function(e){return e.id===t.id?Object(E.a)({},e,{completed:!e.completed}):e});default:return e}},R=Object(A.b)({todos:q}),F=Object(A.c)(R);c.a.render(r.a.createElement(l.a,{store:F},r.a.createElement(function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{exact:!0,path:"/",component:P}),r.a.createElement(o.a,{exact:!0,path:"/todo",component:g})))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,n){e.exports=n(158)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.d1f7d04e.chunk.js.map